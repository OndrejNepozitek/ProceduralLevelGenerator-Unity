<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Pipeline payload</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Procedural level generator - Unity · A configurable Unity plugin for procedural generation of 2D dungeons"><meta data-react-helmet="true" name="docsearch:version" content="1.0.3"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="Pipeline payload is an object that flows through the pipeline. Each pipeline task can modify the payload and all the following tasks in the payload will have access to that modified object."><meta data-react-helmet="true" property="og:description" content="Pipeline payload is an object that flows through the pipeline. Each pipeline task can modify the payload and all the following tasks in the payload will have access to that modified object."><meta data-react-helmet="true" property="og:url" content="https://ondrejnepozitek.github.io/ProceduralLevelGenerator-Unity/docs/1.0.3/generator-pipeline/pipeline-payload">

<link data-react-helmet="true" rel="shortcut icon" href="/ProceduralLevelGenerator-Unity/img/favicon.ico">


<link rel="stylesheet" href="/ProceduralLevelGenerator-Unity/styles.e092193f.css">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/ProceduralLevelGenerator-Unity/"><img class="navbar__logo"><strong>Procedural level generator - Unity</strong></a><a class="navbar__item navbar__link" href="/ProceduralLevelGenerator-Unity/versions">v2.0.0-alpha.1-hotfix.0</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/ProceduralLevelGenerator-Unity/docs/introduction">Docs</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator-Unity/">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/ProceduralLevelGenerator-Unity/"><img class="navbar__logo"><strong>Procedural level generator - Unity</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/versions">v2.0.0-alpha.1-hotfix.0</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator-Unity/">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_25T_"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_1hKf" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><div class="title">Introduction</div><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/installation">Installation</a></li></ul></li><li class="menu__list-item"><div class="title">Basics</div><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/basics/introduction">Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/basics/room-templates">Room templates</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/basics/level-graphs">Level graphs</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/basics/generator-setup">Generator setup</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/basics/performance-tips">Performance tips</a></li></ul></li><li class="menu__list-item"><div class="title">Examples</div><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/examples/example-1">Example 1</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/examples/example-2">Example 2</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/examples/platformers">Platformers</a></li></ul></li><li class="menu__list-item"><div class="title">Generator pipeline</div><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/generator-pipeline/introduction">Generator pipeline</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/generator-pipeline/pipeline-payload">Pipeline payload</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/generator-pipeline/pipeline-tasks">Pipeline tasks</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/generator-pipeline/run-pipeline">Run pipeline</a></li></ul></li><li class="menu__list-item"><div class="title">Pipeline tasks</div><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/pipeline-tasks/fixed-input">Fixed input</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/pipeline-tasks/graph-based-generator">Graph based generator</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/pipeline-tasks/payload-initializer">Payload initializer</a></li></ul></li><li class="menu__list-item"><div class="title">Guides</div><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/guides/adding-door-tiles">Adding door tiles</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/guides/procedural-level-graphs">Procedural level graphs</a></li><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/guides/corridors-correction">Corridors correction</a></li></ul></li><li class="menu__list-item"><div class="title">Other</div><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/other/tilemap-layers">Tilemap layers</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><span style="vertical-align:top" class="badge badge--info">Version: 1.0.3</span><header><h1 class="docTitle_1vWb">Pipeline payload</h1></header><div class="markdown"><p>Pipeline payload is an object that flows through the pipeline. Each pipeline task can modify the payload and all the following tasks in the payload will have access to that modified object.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="basic-idea"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#basic-idea" title="Direct link to heading">#</a>Basic idea</h2><p>The basic idea is that we use interfaces to define which data we need to have on the payload. Below you can see the basic payload interface that provides access to the tilemaps of the generated dungeon together with the GameObject that holds them.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token comment" style="color:rgb(112, 112, 112)">/// Basic generator pipeline payload.</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;/summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">IGeneratorPayload</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// Gameobject that holds dungeon tilemaps and possibly other game objects.</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;/summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token class-name" style="color:#dd4a68">GameObject</span><span class="token plain"> GameObject </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">get</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">set</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// Tilemaps of the generated dungeon.</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;/summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    List</span><span class="token operator" style="color:rgb(204, 130, 66)">&lt;</span><span class="token plain">Tilemap</span><span class="token operator" style="color:rgb(204, 130, 66)">&gt;</span><span class="token plain"> Tilemaps </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">get</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">set</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p> We can use this interface to directly populate the tilemaps with our dungeon tiles in one task, and then for example add monsters in another task. However, some dungeon generators may provide additional information about the dungeon. For example, the generator used in this plugin generates dungeons consisting of rooms, so we may be interested in where are individual rooms placed. For this purpose, there is the <code>IGraphBasedGeneratorPayload</code> interface.</p><p> Following interfaces are provided in the plugin (you can see them defined <a href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator-Unity/tree/master/Assets/ProceduralLevelGenerator/Scripts/GeneratorPipeline/Payloads/Interfaces">here</a>):</p><ul><li><code>IGeneratorPayload</code> - provides tilemaps of the dungeon and the GameObject that holds them</li><li><code>IGraphBasedGeneratorPayload</code> - provides access to the input and the output of the dungeon generator algorithm</li><li><code>INamedTilemapsPayload</code> - provides named tilemaps if you do not want to access them by their indices</li><li><code>IRandomGeneratorPayload</code> - provides access to an instace of the <code>Random</code> class</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="why-interfaces"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-interfaces" title="Direct link to heading">#</a>Why interfaces?</h3><p>Why do we need interfaces? Why not just work with a class that has all the data that we need? Well, <strong>in theory</strong>, interfaces should give us more flexibility. We can decide to use a slightly different generator and replace only a small part of the payload and use our old pipeline tasks that were not affected by the change.</p><p>Another reason is that with interfaces, I can provide some basic pipeline tasks without forcing you to use an existing payload class. You simply make sure that your payload implements all the needed interfaces and the tasks should <em>just work</em>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="extending-payloads"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#extending-payloads" title="Direct link to heading">#</a>Extending payloads</h2><p>If you want to extend the payload, you have basically two options. The first option is to inherit from the <code>PipelinePayload</code> class and add any functionality that you need. This approach is good if you want to just add new functionality and want to keep original functionality intact. The second option is to create your own payload class from scratch without inheriting. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="payload-initialization"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#payload-initialization" title="Direct link to heading">#</a>Payload initialization</h2><p>Before we give the payload to the first task in the pipeline, we need to create its instance. For this purpose, you need to provide an implementation of the abstract <code>AbstractPayloadInitializer</code> class and assign that instance to the <em>PayloadInitializer</em> field of the dungeon generator pipeline.</p><p> This class has only a single method - <code>public abstract object InitializePayload();</code> - which should return a new instace of the payload. There is a default initializer provided (<code>PayloadInitializer</code> class) that prepares tilemaps and creates an instace of the random number generator.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator-Unity/tree/docusaurus/versioned_docs/version-1.0.3/generator-pipeline/pipeline-payload.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/generator-pipeline/introduction"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Generator pipeline</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/ProceduralLevelGenerator-Unity/docs/1.0.3/generator-pipeline/pipeline-tasks"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Pipeline tasks »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#basic-idea" class="contents__link">Basic idea</a><ul><li><a href="#why-interfaces" class="contents__link">Why interfaces?</a></li></ul></li><li><a href="#extending-payloads" class="contents__link">Extending payloads</a></li><li><a href="#payload-initialization" class="contents__link">Payload initialization</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/ProceduralLevelGenerator-Unity/docs/introduction">Introduction</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/OndrejNepozitek">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://ondra.nepozitek.cz/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator-Unity">GitHub</a></li></ul></div></div><div class="text--center">Copyright © 2020 Ondřej Nepožitek</div></div></footer>
</div>

<script src="/ProceduralLevelGenerator-Unity/styles.6ac7f3e0.js"></script>

<script src="/ProceduralLevelGenerator-Unity/runtime~main.5028210b.js"></script>

<script src="/ProceduralLevelGenerator-Unity/main.614634a8.js"></script>

<script src="/ProceduralLevelGenerator-Unity/1.fc42cbf9.js"></script>

<script src="/ProceduralLevelGenerator-Unity/1be78505.e3c46eba.js"></script>

<script src="/ProceduralLevelGenerator-Unity/100.2b758b5b.js"></script>

<script src="/ProceduralLevelGenerator-Unity/a4069bc4.4607b113.js"></script>

<script src="/ProceduralLevelGenerator-Unity/17896441.07d6948c.js"></script>

<script src="/ProceduralLevelGenerator-Unity/df2a2ff9.5374f709.js"></script>


</body>
</html>