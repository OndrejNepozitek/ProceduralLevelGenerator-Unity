<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-31904365-17","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Edgar - Unity" href="/Edgar-Unity/opensearch.xml"><title data-react-helmet="true">Corridors correction | Edgar - Unity</title><meta data-react-helmet="true" name="docsearch:version" content="1.0.3"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Corridors correction | Edgar - Unity"><meta data-react-helmet="true" name="description" content="With some tilesets, it is not possible to correctly connect corridors to rooms without the need of some postprocess. The goal of this tutorial is to demonstrate how to use pipeline tasks to correct such problems. I will use the tileset from Example 2 to describe the problem and show how to fix it."><meta data-react-helmet="true" property="og:description" content="With some tilesets, it is not possible to correctly connect corridors to rooms without the need of some postprocess. The goal of this tutorial is to demonstrate how to use pipeline tasks to correct such problems. I will use the tileset from Example 2 to describe the problem and show how to fix it."><meta data-react-helmet="true" property="og:url" content="https://ondrejnepozitek.github.io/Edgar-Unity/docs/1.0.3/guides/corridors-correction"><link data-react-helmet="true" rel="shortcut icon" href="/Edgar-Unity/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/1.0.3/guides/corridors-correction"><link rel="stylesheet" href="/Edgar-Unity/styles.1a369485.css">
<link rel="preload" href="/Edgar-Unity/styles.f020d2d7.js" as="script">
<link rel="preload" href="/Edgar-Unity/runtime~main.ea5572e9.js" as="script">
<link rel="preload" href="/Edgar-Unity/main.1ae93809.js" as="script">
<link rel="preload" href="/Edgar-Unity/1.10d7e5bb.js" as="script">
<link rel="preload" href="/Edgar-Unity/2.8b3827fc.js" as="script">
<link rel="preload" href="/Edgar-Unity/1be78505.dc7e3e22.js" as="script">
<link rel="preload" href="/Edgar-Unity/183.0a8e36bd.js" as="script">
<link rel="preload" href="/Edgar-Unity/186.267864a0.js" as="script">
<link rel="preload" href="/Edgar-Unity/315afafe.a3958808.js" as="script">
<link rel="preload" href="/Edgar-Unity/17896441.1f7e497d.js" as="script">
<link rel="preload" href="/Edgar-Unity/5eb19e88.cc84158f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/Edgar-Unity/"><strong class="navbar__title">Edgar - Unity</strong></a><a class="navbar__item navbar__link" href="/Edgar-Unity/versions">v2.0.0-alpha.5</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Edgar-Unity/docs">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" position="left" href="/Edgar-Unity/docs/introduction">2.0.0-alpha.5</a></li><li><a class="dropdown__link" position="left" href="/Edgar-Unity/docs/2.0.0-alpha.4/introduction">2.0.0-alpha.4</a></li><li><a class="dropdown__link" position="left" href="/Edgar-Unity/docs/2.0.0-alpha.3/introduction">2.0.0-alpha.3</a></li><li><a class="dropdown__link" position="left" href="/Edgar-Unity/docs/2.0.0-alpha.1/introduction">2.0.0-alpha.1</a></li><li><a class="dropdown__link" position="left" href="/Edgar-Unity/docs/2.0.0-alpha.0/introduction">2.0.0-alpha.0</a></li><li><a class="dropdown__link" position="left" href="/Edgar-Unity/docs/1.0.3/introduction">1.0.3</a></li><li><a class="dropdown__link" position="left" href="/Edgar-Unity/docs/next/introduction">Master/Unreleased</a></li></ul></div><a href="https://github.com/OndrejNepozitek/Edgar-Unity/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/Edgar-Unity/"><strong class="navbar__title">Edgar - Unity</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/Edgar-Unity/versions">v2.0.0-alpha.5</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" href="/Edgar-Unity/docs">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/Edgar-Unity/docs/introduction">2.0.0-alpha.5</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/Edgar-Unity/docs/2.0.0-alpha.4/introduction">2.0.0-alpha.4</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/Edgar-Unity/docs/2.0.0-alpha.3/introduction">2.0.0-alpha.3</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/Edgar-Unity/docs/2.0.0-alpha.1/introduction">2.0.0-alpha.1</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/Edgar-Unity/docs/2.0.0-alpha.0/introduction">2.0.0-alpha.0</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/Edgar-Unity/docs/1.0.3/introduction">1.0.3</a></li><li class="menu__list-item"><a class="menu__link" position="left" href="/Edgar-Unity/docs/next/introduction">Master/Unreleased</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/OndrejNepozitek/Edgar-Unity/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/installation">Installation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/basics/introduction">Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/basics/room-templates">Room templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/basics/level-graphs">Level graphs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/basics/generator-setup">Generator setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/basics/performance-tips">Performance tips</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/examples/example-1">Example 1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/examples/example-2">Example 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/examples/platformers">Platformers</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Generator pipeline</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/generator-pipeline/introduction">Generator pipeline</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/generator-pipeline/pipeline-payload">Pipeline payload</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/generator-pipeline/pipeline-tasks">Pipeline tasks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/generator-pipeline/run-pipeline">Run pipeline</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Pipeline tasks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/pipeline-tasks/fixed-input">Fixed input</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/pipeline-tasks/graph-based-generator">Graph based generator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/pipeline-tasks/payload-initializer">Payload initializer</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/guides/adding-door-tiles">Adding door tiles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/guides/procedural-level-graphs">Procedural level graphs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Edgar-Unity/docs/1.0.3/guides/corridors-correction">Corridors correction</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_2zSB">Other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity/docs/1.0.3/other/tilemap-layers">Tilemap layers</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Edgar - Unity <strong>v1.0.3</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/Edgar-Unity/docs/basics/generated-level-info">latest version</a></strong> (2.0.0-alpha.5).</div></div><div class="docItemContainer_3QWW"><article><div><span class="badge badge--secondary">Version: 1.0.3</span></div><header><h1 class="docTitle_1Lrw">Corridors correction</h1></header><div class="markdown"><p>With some tilesets, it is not possible to correctly connect corridors to rooms without the need of some postprocess. The goal of this tutorial is to demonstrate how to use pipeline tasks to correct such problems. I will use the tileset from <a href="/Edgar-Unity/docs/1.0.3/guides/example2.md">Example 2</a> to describe the problem and show how to fix it.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="problem"></a>Problem<a aria-hidden="true" tabindex="-1" class="hash-link" href="#problem" title="Direct link to heading">#</a></h2><p>The problem with this tileset is that there is an additonal row of lighter tiles above all wall tiles. This is problematic because we must put all door positions on the outline of a room layout and that means that we cannot correctly connect corridor rooms. This can be seen in the images below.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity/img/original/example2_room1.png" target="_blank"><img src="/Edgar-Unity/img/original/example2_room1.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Basic room template</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity/img/original/example2_wrong_corridor.png" target="_blank"><img src="/Edgar-Unity/img/original/example2_wrong_corridor.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Incorrent vertical corridor</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity/img/original/example2_wrong_corridor2.png" target="_blank"><img src="/Edgar-Unity/img/original/example2_wrong_corridor2.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Incorrect connection</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity/img/original/example2_wrong_corridor3.png" target="_blank"><img src="/Edgar-Unity/img/original/example2_wrong_corridor3.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Incorrect connection</div></div></div><blockquote><p><strong>Note:</strong> This problem could be also fixed by making it possible to have door position outside the outline, but that is currently not supported by the dungeon generator library. </p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="solution"></a>Solution<a aria-hidden="true" tabindex="-1" class="hash-link" href="#solution" title="Direct link to heading">#</a></h2><p>The solution is remove the top and bottom rows from the vertical corridor room template (see below) and then write a script that fixes the connection.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity/img/original/example2_corridor_vertical.png" target="_blank"><img src="/Edgar-Unity/img/original/example2_corridor_vertical.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Correct vertical corridor</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity/img/original/corridors_correction_before_fix.png" target="_blank"><img src="/Edgar-Unity/img/original/corridors_correction_before_fix.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Before correction</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity/img/original/corridors_correction_layout.png" target="_blank"><img src="/Edgar-Unity/img/original/corridors_correction_layout.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Correction layout</div></div></div><blockquote><p><strong>Note:</strong> Only the topmost and bottommost rows of tiles are used from the correction layout. The middle rows are present only to make it easier to draw the correction layout.</p></blockquote><blockquote><p><strong>Note:</strong> We can use the correction layout to correct corridors with different widths by simply repeating the middle tile.</p></blockquote><p>The implementation itself is not very interesting but you can find it <a href="https://github.com/OndrejNepozitek/ProceduralLevelGenerator-Unity/blob/master/Assets/ProceduralLevelGenerator/Examples/Example2/Pipeline%20tasks/CorridorsCorrectionConfig.cs" target="_blank" rel="noopener noreferrer">here</a>. It is mostly just playing with indices and copying tiles from the correction layout to the dungeon.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/OndrejNepozitek/Edgar-Unity/tree/docusaurus/versioned_docs/version-1.0.3/guides/corridors-correction.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Edgar-Unity/docs/1.0.3/guides/procedural-level-graphs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Procedural level graphs</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Edgar-Unity/docs/1.0.3/other/tilemap-layers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tilemap layers Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#problem" class="table-of-contents__link">Problem</a></li><li><a href="#solution" class="table-of-contents__link">Solution</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Edgar-Unity/docs/introduction">Introduction</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/OndrejNepozitek" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://ondra.nepozitek.cz/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/OndrejNepozitek/Edgar-Unity" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 OndÅ™ej NepoÅ¾itek</div></div></div></footer></div>
<script src="/Edgar-Unity/styles.f020d2d7.js"></script>
<script src="/Edgar-Unity/runtime~main.ea5572e9.js"></script>
<script src="/Edgar-Unity/main.1ae93809.js"></script>
<script src="/Edgar-Unity/1.10d7e5bb.js"></script>
<script src="/Edgar-Unity/2.8b3827fc.js"></script>
<script src="/Edgar-Unity/1be78505.dc7e3e22.js"></script>
<script src="/Edgar-Unity/183.0a8e36bd.js"></script>
<script src="/Edgar-Unity/186.267864a0.js"></script>
<script src="/Edgar-Unity/315afafe.a3958808.js"></script>
<script src="/Edgar-Unity/17896441.1f7e497d.js"></script>
<script src="/Edgar-Unity/5eb19e88.cc84158f.js"></script>
</body>
</html>